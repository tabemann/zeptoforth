
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Task Queue Words &#8212; zeptoforth  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SysTick Words" href="systick.html" />
    <link rel="prev" title="Stream Words" href="stream.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="task-queue-words">
<h1>Task Queue Words<a class="headerlink" href="#task-queue-words" title="Permalink to this headline">¶</a></h1>
<p>A task queue is a queue of waiting tasks, which then can be woken up, in the order of highest priority first and then the order of their joining the task queue, by another task. Note that tasks can wake up any given number of tasks <em>before</em> they join the task queue, upon which they will not actually deschedule themselves but rather increment the count of waiting tasks (which was negative in this case).</p>
<section id="tqueue">
<h2><code class="docutils literal notranslate"><span class="pre">tqueue</span></code><a class="headerlink" href="#tqueue" title="Permalink to this headline">¶</a></h2>
<p>The following words are in <code class="docutils literal notranslate"><span class="pre">tqueue</span></code>:</p>
<section id="tqueue-size">
<h3><code class="docutils literal notranslate"><span class="pre">tqueue-size</span></code><a class="headerlink" href="#tqueue-size" title="Permalink to this headline">¶</a></h3>
<p>( – bytes )</p>
<p>Get the size of a task queue in memory.</p>
</section>
<section id="no-tqueue-limit">
<h3><code class="docutils literal notranslate"><span class="pre">no-tqueue-limit</span></code><a class="headerlink" href="#no-tqueue-limit" title="Permalink to this headline">¶</a></h3>
<p>( – n )</p>
<p>Magic value indicating no task queue counter limit.</p>
</section>
<section id="init-tqueue">
<h3><code class="docutils literal notranslate"><span class="pre">init-tqueue</span></code><a class="headerlink" href="#init-tqueue" title="Permalink to this headline">¶</a></h3>
<p>( slock addr – )</p>
<p>Initialize a task queue with simple lock <em>slock</em> starting at the specified address; note that it must be <code class="docutils literal notranslate"><span class="pre">tqueue-size</span></code> bytes in size. It will have no counter limit, and its counter will be initialized to zero.</p>
</section>
<section id="init-tqueue-full">
<h3><code class="docutils literal notranslate"><span class="pre">init-tqueue-full</span></code><a class="headerlink" href="#init-tqueue-full" title="Permalink to this headline">¶</a></h3>
<p>( limit counter slock addr – )</p>
<p>Initialize a task queue with simple lock <em>slock</em> starting at the specified address; note that it must be <code class="docutils literal notranslate"><span class="pre">tqueue-size</span></code> bytes in size. Its counter limit will be initialized to <em>limit</em> and its counter will be initialized to <em>counter</em>.</p>
</section>
<section id="wait-tqueue">
<h3><code class="docutils literal notranslate"><span class="pre">wait-tqueue</span></code><a class="headerlink" href="#wait-tqueue" title="Permalink to this headline">¶</a></h3>
<p>( tqueue – )</p>
<p>Decrement the task queue’s internal wait counter. If it is negative, block the current task and place it in the task queue after the last task with a greater or equal priority. Note that the simple lock for the task queue must be held by the task which calls this; this simple lock is released if this blocks, to be claimed again when the task is readied.</p>
</section>
<section id="wake-tqueue">
<h3><code class="docutils literal notranslate"><span class="pre">wake-tqueue</span></code><a class="headerlink" href="#wake-tqueue" title="Permalink to this headline">¶</a></h3>
<p>( tqueue – )</p>
<p>Increment the task queue’s internal wait counter. If a counter limit is set, the internal wait counter will not increase beyond it. If there is a task in the task queue, ready the task with the highest priority added first to the task queue. Note that the simple lock for the task queue must be held by the task which calls this.</p>
</section>
<section id="unwake-tqueue">
<h3><code class="docutils literal notranslate"><span class="pre">unwake-tqueue</span></code><a class="headerlink" href="#unwake-tqueue" title="Permalink to this headline">¶</a></h3>
<p>( tqueue – )</p>
<p>Decrement the task queue’s internal wait counter.</p>
</section>
<section id="wake-tqueue-all">
<h3><code class="docutils literal notranslate"><span class="pre">wake-tqueue-all</span></code><a class="headerlink" href="#wake-tqueue-all" title="Permalink to this headline">¶</a></h3>
<p>( tqueue – )</p>
<p>Wake all the tasks waiting on a task queue.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">zeptoforth</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Module Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="lambda.html">Lambda Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="wordlist.html">Wordlist Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="task.html">Multitasking Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="action.html">Action Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="pin.html">Pin Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="led.html">LED Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio.html">GPIO Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="exti.html">EXTI Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="pio.html">Programmable Input/Output Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="uart.html">UART Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="adc.html">Analog-Digital Converter Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="spi.html">SPI Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="i2c.html">I2C Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="pwm.html">Pulse Width Modulation Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="rtc.html">Realtime Clock (RTC) Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="timer.html">Hardware Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdcard.html">SDHC/SDXC Card Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="fat32.html">FAT32 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple_fat32.html">Simple FAT32 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="fat32_tools.html">FAT32 Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="interrupt.html">Interrupt Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="multicore.html">Multicore Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_tools.html">Development Tools Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="armv6m.html">ARMv6-M Assembler Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="line.html">Line Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="double.html">Double-Cell Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="value.html">Value and Local Variable Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="closure.html">Closures</a></li>
<li class="toctree-l1"><a class="reference internal" href="temp.html">Temporary Buffer Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="task_pool.html">Task Pool words</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_pool.html">Action Pool words</a></li>
<li class="toctree-l1"><a class="reference internal" href="heap.html">Heap Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="pool.html">Pool Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="map.html">Map Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="oo.html">Object Orientation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lock.html">Lock Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="slock.html">Simple Lock Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="fchannel.html">Rendezvous Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="schannel.html">Simple channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="rchannel.html">Bidirectional Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="semaphore.html">Semaphore Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream.html">Stream Words</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Task Queue Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="systick.html">SysTick Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="rng.html">Random Number Generator Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="ansi_term.html">ANSI Terminal words</a></li>
<li class="toctree-l1"><a class="reference internal" href="qspi.html">Quad SPI words</a></li>
<li class="toctree-l1"><a class="reference internal" href="block.html">Block words</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit.html">Block Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="swd.html"><code class="docutils literal notranslate"><span class="pre">swdcom</span></code> Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal.html">Internal Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm.html">Compilation-specific words</a></li>
<li class="toctree-l1"><a class="reference internal" href="expose.html">Exposed Kernel Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extra/display.html">Bitmaps and Displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extra/font.html">Fonts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extra/neopixel.html">Neopixels on the RP2040</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="stream.html" title="previous chapter">Stream Words</a></li>
      <li>Next: <a href="systick.html" title="next chapter">SysTick Words</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Travis Bemann.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/words/tqueue.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>