
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Pool Words &#8212; zeptoforth  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Map Words" href="map.html" />
    <link rel="prev" title="Heap Words" href="heap.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pool-words">
<h1>Pool Words<a class="headerlink" href="#pool-words" title="Permalink to this headline">¶</a></h1>
<p>Pools in zeptoforth are created by the user and consist of discretes blocks that are allocated and freed individual as wholes. There is by default no global pool, and pools created by the user are specifically <em>not</em> concurrency-safe; to make them concurrency-safe one must wrap them in locks, and because of the overhead this would impose, this is not done so by default. Allocating and freeing blocks in pools occurs in constant time and are fast, unlike allocation, resizing, and freeing in heaps</p>
<section id="pool">
<h2><code class="docutils literal notranslate"><span class="pre">pool</span></code><a class="headerlink" href="#pool" title="Permalink to this headline">¶</a></h2>
<p>The following words are in <code class="docutils literal notranslate"><span class="pre">pool</span></code>:</p>
<section id="pool-size">
<h3><code class="docutils literal notranslate"><span class="pre">pool-size</span></code><a class="headerlink" href="#pool-size" title="Permalink to this headline">¶</a></h3>
<p>( – bytes )</p>
<p>Get the size of a pool header in bytes.</p>
</section>
<section id="init-pool">
<h3><code class="docutils literal notranslate"><span class="pre">init-pool</span></code><a class="headerlink" href="#init-pool" title="Permalink to this headline">¶</a></h3>
<p>( block-size addr – )</p>
<p>Initialize a pool at <em>addr</em> with the given block size of <em>block-size</em> bytes. Note that no space for storing blocks is available in a pool when it is first initialized; to add memory to a pool use <code class="docutils literal notranslate"><span class="pre">add-pool</span></code>.</p>
</section>
<section id="add-pool">
<h3><code class="docutils literal notranslate"><span class="pre">add-pool</span></code><a class="headerlink" href="#add-pool" title="Permalink to this headline">¶</a></h3>
<p>( addr bytes pool – )</p>
<p>Add memory starting at <em>addr</em> of size <em>bytes</em> to <em>pool</em> as discrete blocks; only a multiple of the block size of the pool will be added to the pool, so if <em>bytes</em> is not a multiple of said block size not all of the space in the memory provided will be used.</p>
</section>
<section id="allocate-pool">
<h3><code class="docutils literal notranslate"><span class="pre">allocate-pool</span></code><a class="headerlink" href="#allocate-pool" title="Permalink to this headline">¶</a></h3>
<p>( pool – addr )</p>
<p>Allocate a block in <em>pool</em> and return its address. If no blocks are available in the pool, <code class="docutils literal notranslate"><span class="pre">x-allocate-failed</span></code> is raised.</p>
</section>
<section id="free-pool">
<h3><code class="docutils literal notranslate"><span class="pre">free-pool</span></code><a class="headerlink" href="#free-pool" title="Permalink to this headline">¶</a></h3>
<p>( addr pool – )</p>
<p>Free a block at <em>addr</em> in <em>pool</em>, making it available to future allocation.</p>
</section>
<section id="pool-block-size">
<h3><code class="docutils literal notranslate"><span class="pre">pool-block-size</span></code><a class="headerlink" href="#pool-block-size" title="Permalink to this headline">¶</a></h3>
<p>( pool – bytes )</p>
<p>Get the block size of a pool.</p>
</section>
<section id="pool-free-count">
<h3><code class="docutils literal notranslate"><span class="pre">pool-free-count</span></code><a class="headerlink" href="#pool-free-count" title="Permalink to this headline">¶</a></h3>
<p>( pool – count )</p>
<p>Get the number of free blocks in a pool.</p>
</section>
<section id="pool-total-count">
<h3><code class="docutils literal notranslate"><span class="pre">pool-total-count</span></code><a class="headerlink" href="#pool-total-count" title="Permalink to this headline">¶</a></h3>
<p>( pool – count )</p>
<p>Get the total number of blocks in a pool.</p>
</section>
<section id="x-allocate-failed">
<h3><code class="docutils literal notranslate"><span class="pre">x-allocate-failed</span></code><a class="headerlink" href="#x-allocate-failed" title="Permalink to this headline">¶</a></h3>
<p>( – )</p>
<p>The exception raised if block allocation fails.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">zeptoforth</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Module Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="lambda.html">Lambda Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="wordlist.html">Wordlist Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="task.html">Multitasking Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="action.html">Action Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="pin.html">Pin Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="led.html">LED Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio.html">GPIO Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="exti.html">EXTI Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="pio.html">Programmable Input/Output Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="interrupt.html">Interrupt Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="multicore.html">Multicore Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_tools.html">Development Tools Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="line.html">Line Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="double.html">Double-Cell Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="temp.html">Temporary Buffer Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="task_pool.html">Task Pool words</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_pool.html">Action Pool words</a></li>
<li class="toctree-l1"><a class="reference internal" href="heap.html">Heap Words</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pool Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="map.html">Map Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="lock.html">Lock Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="slock.html">Simple Lock Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="fchannel.html">Rendezvous Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="schannel.html">Simple channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="rchannel.html">Bidirectional Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="semaphore.html">Semaphore Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream.html">Stream Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="tqueue.html">Task Queue Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="systick.html">SysTick Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="rng.html">Random Number Generator Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="ansi_term.html">ANSI Terminal words</a></li>
<li class="toctree-l1"><a class="reference internal" href="qspi.html">Quad SPI words</a></li>
<li class="toctree-l1"><a class="reference internal" href="block.html">Block words</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit.html">Block Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="swd.html"><code class="docutils literal notranslate"><span class="pre">swdcom</span></code> Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal.html">Internal Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="asm.html">Compilation-specific words</a></li>
<li class="toctree-l1"><a class="reference internal" href="expose.html">Exposed Kernel Variables</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="heap.html" title="previous chapter">Heap Words</a></li>
      <li>Next: <a href="map.html" title="next chapter">Map Words</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Travis Bemann.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/words/pool.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>